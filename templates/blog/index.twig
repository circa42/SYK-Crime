{% extends "_layouts/base" %}

{% block content %} 

<div class="xs:mx-6 md:mx-auto sm:container my-12">
    {% paginate craft.entries({
        section: 'blog',
        orderBy: 'postDate desc',
        limit: 10
    }) as pageInfo, entries %}

    {% for entry in entries %}
        <article class="mb-12">
            <h2 class="mb-4">
                <a href="{{ entry.url }}" class="nav-item hover:bg-yellow-300 md:text-md lg:text-xl text-bold font-black uppercase inline-block">
                    {{ entry.title }}
                </a>
            </h2>
            {% if entry.body is defined and entry.body %}
                {% set plainBody = entry.body|striptags %}
                {% set teaser = plainBody|slice(0, 120) %}
                {% if plainBody|length > 120 %}
                    {% set teaser = teaser ~ 'â€¦' %}
                {% endif %}
                <p class="mb-4 text-sm">
                    {{ teaser }}
                    <a href="{{ entry.url }}" class="text-bold font-black text-xs text-center uppercase hover:bg-yellow-300 px-2 py-1">Read More</a>
                </p>
            {% endif %}
        </article>
    {% endfor %}

    {% set totalBlogPosts = pageInfo.total ?? entries|length %}
    {% if totalBlogPosts > 1 and pageInfo.totalPages > 1 %}
        <nav class="flex flex-wrap justify-center items-center gap-2 mt-4" aria-label="Blog pagination">
            {% for pageNumber, pageUrl in pageInfo.getRangeUrls(1, pageInfo.totalPages) %}
                {% if pageNumber == pageInfo.currentPage %}
                    <span class="nav-item inline-flex items-center justify-center px-4 py-2 text-sm font-black uppercase bg-gray-300 pointer-events-none">
                        {{ pageNumber }}
                    </span>
                {% else %}
                    <a href="{{ pageUrl }}" class="nav-item inline-flex items-center justify-center px-4 py-2 text-sm font-black uppercase bg-yellow-300 hover:bg-gray-300">
                        {{ pageNumber }}
                    </a>
                {% endif %}
            {% endfor %}
        </nav>
    {% endif %}
</div>

{% endblock %}
